<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/vaultManager/VaultManagerStorage.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">contracts/vaultManager/</a> VaultManagerStorage.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/3</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/0</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/1</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/3</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: UNLICENSED
&nbsp;
pragma solidity 0.8.0;
&nbsp;
import '@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol';
import '@openzeppelin/contracts/token/ERC20/IERC20.sol';
import {PausableUpgradeable} from '@openzeppelin/contracts-upgradeable/security/PausableUpgradeable.sol';
import {ReentrancyGuardUpgradeable} from '@openzeppelin/contracts-upgradeable/security/ReentrancyGuardUpgradeable.sol';
&nbsp;
import '../external/FunctionUtils.sol';
&nbsp;
import '../interfaces/IStakingRewards.sol';
import '../interfaces/IVaultManager.sol';
import '../interfaces/IKeeperFees.sol';
import '../interfaces/IOracle.sol';
import '../interfaces/IStableMaster.sol';
import '../interfaces/IManager.sol';
&nbsp;
struct Vault {
	uint256 initialRate;
	uint256 broughtAmount;
	uint256 committedAmount;
	uint256 creationBlock;
	uint256 fees;
}
&nbsp;
/// @title Parameters of the vault Manager
/// @author Angle Core Team
/// @dev This contract does not interact directly with users
contract VaultManagerStorage {
	// ========================= Variables ==============================
&nbsp;
	/// @notice address of the StableMaster instance
	IStableMaster public stableMaster;
&nbsp;
	/// @notice oracle to give rate feed
	IOracle public oracle;
&nbsp;
	/// @notice keeper contract to update fees incured by HA
	IKeeperFees public keeperFees;
&nbsp;
	/// @notice base used for computation of ratios and floating numbers
	uint256 public BASE = 10**18;
&nbsp;
	/// @notice the total committedAmount for this pool stablecoin / collateral
	uint256 public totalCAmount = 0;
&nbsp;
	// ================ Governance Token Distribution ====================
	/// @notice to enable gov token distribution
	uint256 public activatedMURDistribution = 0;
&nbsp;
	/// @notice interface for the murToken distributed as a reward
	IERC20 public murToken;
&nbsp;
	/// @notice Below are parameters that can also be found in other staking contracts
	/// to be able to compute rewards from staking (having vaults here) correctly
	// TODO check if all the parameters need to be initialized to zero or if putting nothing could work
	uint256 public periodFinish = 0;
	uint256 public rewardRate = 0;
	uint256 public rewardsDuration = 0;
	uint256 public lastUpdateTime = 0;
	uint256 public rewardPerTokenStored = 0;
	address public rewardsDistribution = address(0);
&nbsp;
	/// @notice Used to compute the rewards gained by someone in a timeframe
	mapping(address =&gt; uint256) public userRewardPerTokenPaid;
	/// @notice How much rewards are gained by a person
	mapping(address =&gt; uint256) public rewards;
&nbsp;
	/// TODO change the structure for it
	mapping(address =&gt; Vault) public vaultMap;
&nbsp;
	// ================ Parameters ====================
&nbsp;
	/// @notice amount of time before a HA is allowed to withdraw funds
	uint256 public secureBlocks = 0;
&nbsp;
	/// @notice maximum leverage multiplier authorized for HAs
	uint256 public maxLeverage = 3 * BASE;
&nbsp;
	/// Deposit fees for HAs depend on the gap to reach full HA coverage 
	/// that is the ratio between what's covered and what's to cover
	/// @notice thresholds for the gap to HA coverage. The smaller the gap the bigger the fees will be
	/// because this means that the max amount to insure is soon to be reached
	uint256[] public XHAFeesDeposit = [3 * BASE / 10, 6 * BASE / 10, 9 * BASE / 10];
	/// @notice Deposit fees at threshold values
	uint256[] public YHAFeesDeposit = [BASE / 100, BASE / 100, BASE / 100];
	/// @notice extra parameter from the keeper that is multiplied to the fees from above and that
	/// can be used to change withdraw fees
	uint256 public HAFeesDepositKeeper = BASE;
&nbsp;
	/// Withdraw fees for HAs depend on the time they have spent as HAs
	/// @notice thresholds of time spent as HA
	uint256[] public XHAFeesWithdraw = [60, 3600 * 24, 3600 * 24 * 7, 3600 * 24 * 14];
	/// @notice value of the fees at those thresholds
	uint256[] public YHAFeesWithdraw = [BASE / 100, BASE / 100, BASE / 100, BASE / 100];
	/// @notice extra parameter from the keeper that is multiplied to the fees from above and that
	/// can be used to change withdraw fees
	uint256 public HAFeesWithdrawKeeper = BASE;
&nbsp;
	// ========================= Constructor ==============================
&nbsp;
	/// @notice initializes the manager for this stablecoin and this collateral
	/// @param _stableMaster contract
	/// @param _oracle contract
<span class="fstat-no" title="function not covered" >	function initializeParameters(</span>
		IStableMaster _stableMaster,
		IOracle _oracle,
		IERC20 _murToken
	) internal {		
<span class="cstat-no" title="statement not covered" >		stableMaster = _stableMaster</span>;
<span class="cstat-no" title="statement not covered" >		oracle = _oracle</span>;
<span class="cstat-no" title="statement not covered" >		murToken = _murToken</span>;
	}
&nbsp;
	// ========================= Events (of the internal contract) ===========================
&nbsp;
	event CashingOut(address _owner, uint256 _committedAmount, uint256 _position);
&nbsp;
	event Liquidating(
		address _owner, 
		uint256 _broughtAmount, 
		uint256 _previousAmountLock, 
		uint256 _totalCAmount
	);
&nbsp;
	event TotalLeverageChange(
		int256 _stockUsers,
		uint256 _stablecoinsInCol,
		bool _cAmountIsValid,
		uint256 _newCAmount,
		uint256 _maxCAmount
	);
&nbsp;
	event UpdatingVault(
		address _owner,
		uint256 _init_rate,
		uint256 _broughtAmount,
		uint256 _committedAmount,
		uint256 _fees
	);
&nbsp;
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu May 27 2021 15:13:56 GMT+0200 (Central European Summer Time)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
