<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/dao/Timelock.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">contracts/dao/</a> Timelock.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/41</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/32</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/41</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: Copyright 2020 Compound Labs, Inc.
// forked from https://github.com/compound-finance/compound-protocol/tree/master/contracts/Governance
&nbsp;
pragma solidity 0.8.0;
&nbsp;
// Forked from Compound
// See https://github.com/compound-finance/compound-protocol/blob/master/contracts/Timelock.sol
contract Timelock {
	event NewAdmin(address indexed newAdmin);
	event NewPendingAdmin(address indexed newPendingAdmin);
	event NewDelay(uint256 indexed newDelay);
	event CancelTransaction(
		bytes32 indexed txHash,
		address indexed target,
		uint256 value,
		string signature,
		bytes data,
		uint256 eta
	);
	event ExecuteTransaction(
		bytes32 indexed txHash,
		address indexed target,
		uint256 value,
		string signature,
		bytes data,
		uint256 eta
	);
	event QueueTransaction(
		bytes32 indexed txHash,
		address indexed target,
		uint256 value,
		string signature,
		bytes data,
		uint256 eta
	);
&nbsp;
	uint256 public constant GRACE_PERIOD = 14 days;
	uint256 public constant MINIMUM_DELAY = 0 days;
	uint256 public constant MAXIMUM_DELAY = 30 days;
&nbsp;
	address public admin;
	address public pendingAdmin;
	uint256 public delay;
&nbsp;
	mapping(bytes32 =&gt; bool) public queuedTransactions;
&nbsp;
<span class="fstat-no" title="function not covered" >	constructor(address admin_, uint256 delay_) {</span>
<span class="cstat-no" title="statement not covered" >		require(delay_ &gt;= MINIMUM_DELAY, 'Timelock::constructor: Delay must exceed minimum delay.')</span>;
<span class="cstat-no" title="statement not covered" >		require(delay_ &lt;= MAXIMUM_DELAY, 'Timelock::setDelay: Delay must not exceed maximum delay.')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		admin = admin_</span>;
<span class="cstat-no" title="statement not covered" >		delay = delay_</span>;
	}
&nbsp;
	receive() external payable {}
&nbsp;
<span class="fstat-no" title="function not covered" >	function setDelay(uint256 delay_) public {</span>
<span class="cstat-no" title="statement not covered" >		require(msg.sender == address(this), 'Timelock::setDelay: Call must come from Timelock.')</span>;
<span class="cstat-no" title="statement not covered" >		require(delay_ &gt;= MINIMUM_DELAY, 'Timelock::setDelay: Delay must exceed minimum delay.')</span>;
<span class="cstat-no" title="statement not covered" >		require(delay_ &lt;= MAXIMUM_DELAY, 'Timelock::setDelay: Delay must not exceed maximum delay.')</span>;
<span class="cstat-no" title="statement not covered" >		delay = delay_</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit NewDelay(delay);</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function acceptAdmin() public {</span>
<span class="cstat-no" title="statement not covered" >		require(msg.sender == pendingAdmin, 'Timelock::acceptAdmin: Call must come from pendingAdmin.')</span>;
<span class="cstat-no" title="statement not covered" >		admin = msg.sender</span>;
<span class="cstat-no" title="statement not covered" >		pendingAdmin = address(0)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit NewAdmin(admin);</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function setPendingAdmin(address pendingAdmin_) public {</span>
<span class="cstat-no" title="statement not covered" >		require(msg.sender == address(this), 'Timelock::setPendingAdmin: Call must come from Timelock.')</span>;
<span class="cstat-no" title="statement not covered" >		pendingAdmin = pendingAdmin_</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit NewPendingAdmin(pendingAdmin);</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function queueTransaction(</span>
		address target,
		uint256 value,
		string memory signature,
		bytes memory data,
		uint256 eta
	) public returns (bytes32) {
<span class="cstat-no" title="statement not covered" >		require(msg.sender == admin, 'Timelock::queueTransaction: Call must come from admin.')</span>;
<span class="cstat-no" title="statement not covered" >		require(</span>
			eta &gt;= getBlockTimestamp() + delay,
			'Timelock::queueTransaction: Estimated execution block must satisfy delay.'
		);
&nbsp;
<span class="cstat-no" title="statement not covered" >		bytes32 txHash = keccak256(abi.encode(target, value, signature, data, eta));</span>
<span class="cstat-no" title="statement not covered" >		queuedTransactions[txHash] = true</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit QueueTransaction(txHash, target, value, signature, data, eta);</span>
<span class="cstat-no" title="statement not covered" >		return txHash;</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function cancelTransaction(</span>
		address target,
		uint256 value,
		string memory signature,
		bytes memory data,
		uint256 eta
	) public {
<span class="cstat-no" title="statement not covered" >		require(msg.sender == admin, 'Timelock::cancelTransaction: Call must come from admin.')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		bytes32 txHash = keccak256(abi.encode(target, value, signature, data, eta));</span>
<span class="cstat-no" title="statement not covered" >		queuedTransactions[txHash] = false</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit CancelTransaction(txHash, target, value, signature, data, eta);</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function executeTransaction(</span>
		address target,
		uint256 value,
		string memory signature,
		bytes memory data,
		uint256 eta
	) public payable returns (bytes memory) {
<span class="cstat-no" title="statement not covered" >		require(msg.sender == admin, 'Timelock::executeTransaction: Call must come from admin.')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		bytes32 txHash = keccak256(abi.encode(target, value, signature, data, eta));</span>
<span class="cstat-no" title="statement not covered" >		require(queuedTransactions[txHash], "Timelock::executeTransaction: Transaction hasn't been queued.")</span>;
<span class="cstat-no" title="statement not covered" >		require(getBlockTimestamp() &gt;= eta, "Timelock::executeTransaction: Transaction hasn't surpassed time lock.")</span>;
<span class="cstat-no" title="statement not covered" >		require(getBlockTimestamp() &lt;= eta + GRACE_PERIOD, 'Timelock::executeTransaction: Transaction is stale.')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		queuedTransactions[txHash] = false</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		bytes memory callData;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		if (bytes(signature).length == 0) {</span>
<span class="cstat-no" title="statement not covered" >			callData = data</span>;
		} else {
<span class="cstat-no" title="statement not covered" >			callData = abi.encodePacked(bytes4(keccak256(bytes(signature))), data)</span>;
		}
&nbsp;
		// solium-disable-next-line security/no-call-value
<span class="cstat-no" title="statement not covered" >		(bool success, bytes memory returnData) = target.call{value: value}(callData);</span> //solhint-disable avoid-call-value;
<span class="cstat-no" title="statement not covered" >		require(success, 'Timelock::executeTransaction: Transaction execution reverted.')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >		emit ExecuteTransaction(txHash, target, value, signature, data, eta);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		return returnData;</span>
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	function getBlockTimestamp() internal view returns (uint256) {</span>
		// solium-disable-next-line security/no-block-members
<span class="cstat-no" title="statement not covered" >		return block.timestamp;</span>
	}
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu May 27 2021 15:13:56 GMT+0200 (Central European Summer Time)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
